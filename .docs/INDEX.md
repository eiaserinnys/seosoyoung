# seosoyoung 코드 인덱스

> 이 문서는 자동 생성되었습니다. 직접 수정하지 마세요.
> 생성 명령: `python .docs/generate.py`

## 모듈 목록

- [`seosoyoung/auth.py`](modules/seosoyoung_auth.md): 권한 및 역할 관리
- [`claude/agent_runner.py`](modules/claude_agent_runner.md): Claude Code SDK 기반 실행기
- [`claude/executor.py`](modules/claude_executor.md): Claude Code 실행 로직
- [`claude/message_formatter.py`](modules/claude_message_formatter.md): 슬랙 메시지 포맷팅 유틸리티
- [`claude/reaction_manager.py`](modules/claude_reaction_manager.md): 슬랙 리액션 관리
- [`claude/security.py`](modules/claude_security.md): 보안 레이어
- [`claude/session.py`](modules/claude_session.md): Claude Code 세션 관리
- [`seosoyoung/config.py`](modules/seosoyoung_config.md): 설정 관리
- [`handlers/actions.py`](modules/handlers_actions.md): 재시작 버튼 액션 핸들러
- [`handlers/mention.py`](modules/handlers_mention.md): @seosoyoung 멘션 핸들러
- [`handlers/message.py`](modules/handlers_message.md): 스레드 메시지 핸들러
- [`handlers/translate.py`](modules/handlers_translate.md): 번역 핸들러
- [`image_gen/generator.py`](modules/image_gen_generator.md): Gemini API 이미지 생성 모듈
- [`seosoyoung/logging_config.py`](modules/seosoyoung_logging_config.md): 로깅 설정 모듈
- [`seosoyoung/main.py`](modules/seosoyoung_main.md): SeoSoyoung 슬랙 봇 메인
- [`mcp/__main__.py`](modules/mcp___main__.md): MCP 서버 실행 진입점
- [`mcp/config.py`](modules/mcp_config.md): MCP 서버 설정
- [`mcp/server.py`](modules/mcp_server.md): seosoyoung MCP 서버 정의
- [`tools/attach.py`](modules/tools_attach.md): 파일 첨부 및 슬랙 컨텍스트 MCP 도구
- [`memory/context_builder.py`](modules/memory_context_builder.md): 컨텍스트 빌더
- [`memory/observation_pipeline.py`](modules/memory_observation_pipeline.md): 관찰 파이프라인
- [`memory/observer.py`](modules/memory_observer.md): Observer 모듈
- [`memory/promoter.py`](modules/memory_promoter.md): Promoter / Compactor 모듈
- [`memory/prompts.py`](modules/memory_prompts.md): Observer/Reflector 프롬프트
- [`memory/reflector.py`](modules/memory_reflector.md): Reflector 모듈
- [`memory/store.py`](modules/memory_store.md): 관찰 로그 저장소
- [`memory/token_counter.py`](modules/memory_token_counter.md): 토큰 카운터
- [`profile/manager.py`](modules/profile_manager.md): Claude Code 인증 프로필 관리
- [`recall/aggregator.py`](modules/recall_aggregator.md): 결과 집계기
- [`recall/evaluator.py`](modules/recall_evaluator.md): 하이쿠 평가 클라이언트
- [`recall/loader.py`](modules/recall_loader.md): 도구 정의 로더
- [`recall/recall.py`](modules/recall_recall.md): Recall - 도구 선택 사전 분석 파이프라인
- [`seosoyoung/restart.py`](modules/seosoyoung_restart.md): 재시작 관리
- [`search/schema.py`](modules/search_schema.md): Whoosh schema definition for dialogue search.
- [`search/searcher.py`](modules/search_searcher.md): Whoosh searcher for dialogue data.
- [`slack/file_handler.py`](modules/slack_file_handler.md): 슬랙 파일 다운로드 및 처리 유틸리티
- [`slack/helpers.py`](modules/slack_helpers.md): Slack 메시지 유틸리티
- [`translator/__main__.py`](modules/translator___main__.md): 번역 기능 CLI 테스트
- [`translator/detector.py`](modules/translator_detector.md): 언어 감지 모듈
- [`translator/glossary.py`](modules/translator_glossary.md): 용어집 로더 모듈
- [`translator/translator.py`](modules/translator_translator.md): 번역 모듈
- [`trello/client.py`](modules/trello_client.md): Trello API 클라이언트
- [`trello/list_runner.py`](modules/trello_list_runner.md): ListRunner - 리스트 정주행 기능
- [`trello/watcher.py`](modules/trello_watcher.md): Trello 워처 - To Go 리스트 감시 및 처리
- [`web/cache.py`](modules/web_cache.md): 웹 콘텐츠 캐시 관리
- [`web/extractor.py`](modules/web_extractor.md): HTML에서 컨텐츠 및 메타데이터 추출
- [`web/fetcher.py`](modules/web_fetcher.md): Selenium 기반 HTML 페처

## 빠른 참조

### 주요 클래스

- `ClaudeResult` (seosoyoung/claude/agent_runner.py:85): Claude Code 실행 결과
- `ClaudeAgentRunner` (seosoyoung/claude/agent_runner.py:100): Claude Code SDK 기반 실행기
- `PendingPrompt` (seosoyoung/claude/executor.py:60): 인터벤션 대기 중인 프롬프트 정보
- `ClaudeExecutor` (seosoyoung/claude/executor.py:73): Claude Code 실행기
- `SecurityError` (seosoyoung/claude/security.py:10): 보안 관련 에러
- `Session` (seosoyoung/claude/session.py:21): Claude Code 세션 정보
- `SessionManager` (seosoyoung/claude/session.py:41): 세션 매니저
- `SessionRuntime` (seosoyoung/claude/session.py:185): 세션 실행 상태 관리자
- `ConfigurationError` (seosoyoung/config.py:17): 설정 오류 예외
- `Config` (seosoyoung/config.py:58): 애플리케이션 설정
- `GeneratedImage` (seosoyoung/image_gen/generator.py:24): 생성된 이미지 결과
- `InjectionResult` (seosoyoung/memory/context_builder.py:23): 주입 결과 — 디버그 로그용 정보를 포함
- `ContextBuilder` (seosoyoung/memory/context_builder.py:118): 장기 기억 + 세션 관찰 로그를 시스템 프롬프트로 변환
- `ObserverResult` (seosoyoung/memory/observer.py:22): Observer 출력 결과
- `Observer` (seosoyoung/memory/observer.py:63): 대화를 관찰하여 구조화된 관찰 로그를 생성
- `PromoterResult` (seosoyoung/memory/promoter.py:20): Promoter 출력 결과
- `CompactorResult` (seosoyoung/memory/promoter.py:35): Compactor 출력 결과
- `Promoter` (seosoyoung/memory/promoter.py:103): 장기 기억 후보를 검토하여 승격
- `Compactor` (seosoyoung/memory/promoter.py:157): 장기 기억을 압축
- `ReflectorResult` (seosoyoung/memory/reflector.py:23): Reflector 출력 결과
- `Reflector` (seosoyoung/memory/reflector.py:38): 관찰 로그를 압축하고 재구조화
- `MemoryRecord` (seosoyoung/memory/store.py:36): 세션별 관찰 로그 레코드
- `MemoryStore` (seosoyoung/memory/store.py:91): 파일 기반 관찰 로그 저장소
- `TokenCounter` (seosoyoung/memory/token_counter.py:9): o200k_base 인코딩 기반 토큰 카운터
- `ProfileInfo` (seosoyoung/profile/manager.py:14): 프로필 정보
- `ProfileManager` (seosoyoung/profile/manager.py:24): Claude Code 인증 프로필 관리자
- `AggregationResult` (seosoyoung/recall/aggregator.py:121): 집계 결과
- `ResultAggregator` (seosoyoung/recall/aggregator.py:211): 결과 집계기
- `EvaluationResult` (seosoyoung/recall/evaluator.py:182): 도구 평가 결과
- `ToolEvaluator` (seosoyoung/recall/evaluator.py:208): 도구 적합도 평가기
- `ToolDefinition` (seosoyoung/recall/loader.py:51): 도구 정의 기본 클래스
- `AgentDefinition` (seosoyoung/recall/loader.py:73): 에이전트 정의
- `SkillDefinition` (seosoyoung/recall/loader.py:95): 스킬 정의
- `ToolLoader` (seosoyoung/recall/loader.py:125): 도구 정의 로더
- `RecallResult` (seosoyoung/recall/recall.py:30): Recall 결과
- `Recall` (seosoyoung/recall/recall.py:106): Recall - 도구 선택 사전 분석 파이프라인
- `RestartType` (seosoyoung/restart.py:15): 재시작 유형
- `RestartRequest` (seosoyoung/restart.py:22): 재시작 요청 정보
- `RestartManager` (seosoyoung/restart.py:30): 재시작 관리자
- `DialogueSearcher` (seosoyoung/search/searcher.py:14): 대사 검색 API.
- `SlackFile` (seosoyoung/slack/file_handler.py:35): 슬랙 파일 정보
- `DownloadedFile` (seosoyoung/slack/file_handler.py:45): 다운로드된 파일 정보
- `Language` (seosoyoung/translator/detector.py:9): 
- `GlossaryMatchResult` (seosoyoung/translator/glossary.py:43): 용어 매칭 결과
- `TrelloCard` (seosoyoung/trello/client.py:16): 트렐로 카드 정보
- `TrelloClient` (seosoyoung/trello/client.py:28): Trello API 클라이언트
- `ListNotFoundError` (seosoyoung/trello/list_runner.py:20): 리스트를 찾을 수 없을 때 발생하는 예외
- `EmptyListError` (seosoyoung/trello/list_runner.py:25): 리스트에 카드가 없을 때 발생하는 예외
- `ValidationStatus` (seosoyoung/trello/list_runner.py:30): 검증 결과 상태
- `SessionStatus` (seosoyoung/trello/list_runner.py:37): 리스트 정주행 세션 상태
- `CardExecutionResult` (seosoyoung/trello/list_runner.py:48): 카드 실행 결과
- `ValidationResult` (seosoyoung/trello/list_runner.py:58): 검증 결과
- `CardRunResult` (seosoyoung/trello/list_runner.py:67): 카드 실행 및 검증 전체 결과
- `ListRunSession` (seosoyoung/trello/list_runner.py:78): 리스트 정주행 세션 정보
- `ListRunner` (seosoyoung/trello/list_runner.py:123): 리스트 정주행 관리자
- `TrackedCard` (seosoyoung/trello/watcher.py:19): 추적 중인 카드 정보 (To Go 리스트 감시용)
- `ThreadCardInfo` (seosoyoung/trello/watcher.py:34): 스레드 ↔ 카드 매핑 정보 (리액션 처리용)
- `TrelloWatcher` (seosoyoung/trello/watcher.py:50): Trello 리스트 감시자
- `WebCache` (seosoyoung/web/cache.py:10): URL 기반 웹 콘텐츠 캐시 관리자
- `ContentExtractor` (seosoyoung/web/extractor.py:30): HTML에서 본문과 메타데이터를 추출하는 클래스
- `HtmlFetcher` (seosoyoung/web/fetcher.py:14): Selenium을 사용한 동적 웹 페이지 HTML 페처

### 주요 함수

- `check_permission()` (seosoyoung/auth.py:13): 사용자 권한 확인 (관리자 명령어용)
- `get_user_role()` (seosoyoung/auth.py:26): 사용자 역할 정보 반환
- `get_claude_runner()` (seosoyoung/claude/__init__.py:9): Claude 실행기 인스턴스를 반환하는 팩토리 함수
- `async main()` (seosoyoung/claude/agent_runner.py:781): 
- `get_runner_for_role()` (seosoyoung/claude/executor.py:44): 역할에 맞는 ClaudeAgentRunner 반환
- `escape_backticks()` (seosoyoung/claude/message_formatter.py:10): 텍스트 내 모든 백틱을 이스케이프
- `parse_summary_details()` (seosoyoung/claude/message_formatter.py:29): 응답에서 요약과 상세 내용을 파싱
- `strip_summary_details_markers()` (seosoyoung/claude/message_formatter.py:63): 응답에서 SUMMARY/DETAILS 마커만 제거하고 내용은 유지
- `build_trello_header()` (seosoyoung/claude/message_formatter.py:87): 트렐로 카드용 슬랙 메시지 헤더 생성
- `add_reaction()` (seosoyoung/claude/reaction_manager.py:24): 슬랙 메시지에 이모지 리액션 추가
- `remove_reaction()` (seosoyoung/claude/reaction_manager.py:44): 슬랙 메시지에서 이모지 리액션 제거
- `register_all_handlers()` (seosoyoung/handlers/__init__.py:9): 모든 핸들러를 앱에 등록
- `send_restart_confirmation()` (seosoyoung/handlers/actions.py:11): 재시작 확인 메시지를 인터랙티브 버튼과 함께 전송
- `register_action_handlers()` (seosoyoung/handlers/actions.py:79): 액션 핸들러 등록
- `extract_command()` (seosoyoung/handlers/mention.py:81): 멘션에서 명령어 추출
- `build_prompt_with_recall()` (seosoyoung/handlers/mention.py:107): Recall 결과를 포함한 프롬프트 구성.
- `get_channel_history()` (seosoyoung/handlers/mention.py:143): 채널의 최근 메시지를 가져와서 컨텍스트 문자열로 반환
- `register_mention_handlers()` (seosoyoung/handlers/mention.py:164): 멘션 핸들러 등록
- `process_thread_message()` (seosoyoung/handlers/message.py:16): 세션이 있는 스레드에서 메시지를 처리하는 공통 로직.
- `register_message_handlers()` (seosoyoung/handlers/message.py:74): 메시지 핸들러 등록
- `process_translate_message()` (seosoyoung/handlers/translate.py:194): 메시지를 번역 처리합니다.
- `register_translate_handler()` (seosoyoung/handlers/translate.py:319): 번역 핸들러를 앱에 등록합니다.
- `async generate_image()` (seosoyoung/image_gen/generator.py:31): Gemini API로 이미지를 생성하고 임시 파일로 저장
- `setup_logging()` (seosoyoung/logging_config.py:44): 로깅 설정 및 로거 반환
- `notify_startup()` (seosoyoung/main.py:94): 봇 시작 알림
- `notify_shutdown()` (seosoyoung/main.py:105): 봇 종료 알림
- `start_trello_watcher()` (seosoyoung/main.py:116): Trello 워처 시작
- `start_list_runner()` (seosoyoung/main.py:136): 리스트 러너 초기화
- `init_bot_user_id()` (seosoyoung/main.py:146): 봇 사용자 ID 초기화
- `slack_attach_file()` (seosoyoung/mcp/server.py:11): 슬랙에 파일을 첨부합니다.
- `slack_get_context()` (seosoyoung/mcp/server.py:27): 현재 슬랙 대화의 채널/스레드 정보를 반환합니다.
- `get_slack_context()` (seosoyoung/mcp/tools/attach.py:24): 현재 대화의 채널/스레드 정보를 환경변수에서 읽어 반환
- `attach_file()` (seosoyoung/mcp/tools/attach.py:36): 슬랙에 파일을 첨부
- `add_relative_time()` (seosoyoung/memory/context_builder.py:33): 관찰 로그의 날짜 헤더에 상대 시간 주석을 추가합니다.
- `optimize_for_context()` (seosoyoung/memory/context_builder.py:76): 관찰 로그를 컨텍스트 주입에 최적화합니다.
- `parse_candidate_entries()` (seosoyoung/memory/observation_pipeline.py:72): <candidates> 태그 내용을 파싱하여 dict 리스트로 변환.
- `async observe_conversation()` (seosoyoung/memory/observation_pipeline.py:108): 매턴 Observer를 호출하여 세션 관찰 로그를 갱신하고 후보를 수집합니다.
- `parse_observer_output()` (seosoyoung/memory/observer.py:31): Observer 응답에서 XML 태그를 파싱합니다.
- `parse_promoter_output()` (seosoyoung/memory/promoter.py:83): Promoter 응답에서 <promoted>와 <rejected> 태그를 파싱합니다.
- `parse_compactor_output()` (seosoyoung/memory/promoter.py:97): Compactor 응답에서 <compacted> 태그를 파싱합니다.
- `build_observer_system_prompt()` (seosoyoung/memory/prompts.py:104): Observer 시스템 프롬프트를 반환합니다.
- `build_observer_user_prompt()` (seosoyoung/memory/prompts.py:109): Observer 사용자 프롬프트를 구성합니다.
- `build_promoter_prompt()` (seosoyoung/memory/prompts.py:278): Promoter 프롬프트를 구성합니다.
- `build_compactor_prompt()` (seosoyoung/memory/prompts.py:289): Compactor 프롬프트를 구성합니다.
- `build_reflector_system_prompt()` (seosoyoung/memory/prompts.py:300): Reflector 시스템 프롬프트를 반환합니다.
- `build_reflector_retry_prompt()` (seosoyoung/memory/prompts.py:305): Reflector 재시도 프롬프트를 반환합니다.
- `rank_results()` (seosoyoung/recall/aggregator.py:27): 평가 결과를 점수 기준으로 정렬.
- `select_best_tool()` (seosoyoung/recall/aggregator.py:42): 최적 도구 선택.
- `build_summary_prompt()` (seosoyoung/recall/aggregator.py:67): 요약 생성 프롬프트.
- `build_evaluation_prompt()` (seosoyoung/recall/evaluator.py:28): 도구 평가를 위한 프롬프트 생성.
- `parse_evaluation_response()` (seosoyoung/recall/evaluator.py:90): 평가 응답 파싱.
- `parse_frontmatter()` (seosoyoung/recall/loader.py:19): YAML frontmatter와 본문을 분리하여 파싱.
- `get_default_index_path()` (seosoyoung/search/searcher.py:197): 기본 인덱스 경로 반환.
- `format_results()` (seosoyoung/search/searcher.py:202): 결과 포맷팅.
- `main()` (seosoyoung/search/searcher.py:222): CLI 진입점.
- `get_file_type()` (seosoyoung/slack/file_handler.py:54): 파일 확장자로 타입 분류
- `ensure_tmp_dir()` (seosoyoung/slack/file_handler.py:67): 스레드별 임시 폴더 생성
- `cleanup_thread_files()` (seosoyoung/slack/file_handler.py:76): 스레드의 임시 파일 정리
- `cleanup_all_files()` (seosoyoung/slack/file_handler.py:88): 모든 임시 파일 정리
- `async download_file()` (seosoyoung/slack/file_handler.py:98): 슬랙 파일 다운로드
- `async download_files_from_event()` (seosoyoung/slack/file_handler.py:183): 이벤트에서 파일들을 다운로드 (async 버전)
- `download_files_sync()` (seosoyoung/slack/file_handler.py:209): 이벤트에서 파일들을 다운로드 (동기 버전)
- `build_file_context()` (seosoyoung/slack/file_handler.py:240): 파일 정보를 프롬프트 컨텍스트로 구성
- `upload_file_to_slack()` (seosoyoung/slack/helpers.py:12): 파일을 슬랙에 첨부
- `send_long_message()` (seosoyoung/slack/helpers.py:47): 긴 메시지를 분할해서 전송 (thread_ts가 None이면 채널에 응답)
- `main()` (seosoyoung/translator/__main__.py:18): 
- `is_korean_char()` (seosoyoung/translator/detector.py:14): 한글 문자인지 확인 (한글 자모, 음절 모두 포함)
- `detect_language()` (seosoyoung/translator/detector.py:27): 텍스트의 언어를 감지
- `get_glossary_entries()` (seosoyoung/translator/glossary.py:135): 용어집 항목들을 (한국어, 영어) 쌍으로 반환 (캐싱)
- `find_relevant_terms()` (seosoyoung/translator/glossary.py:268): 텍스트에서 관련 용어 추출 (하위 호환성 유지)
- `find_relevant_terms_v2()` (seosoyoung/translator/glossary.py:287): 텍스트에서 관련 용어 추출 (개선된 버전, 디버그 정보 포함)
- `get_term_mappings()` (seosoyoung/translator/glossary.py:403): 용어 매핑 딕셔너리 생성 (하위 호환성 유지)
- `clear_cache()` (seosoyoung/translator/glossary.py:433): 캐시 초기화 (테스트 또는 용어집 갱신 시 사용)
- `translate()` (seosoyoung/translator/translator.py:125): 텍스트를 번역
- `async get_article()` (seosoyoung/web/__init__.py:22): URL에서 아티클 추출
- `format_article_for_prompt()` (seosoyoung/web/__init__.py:97): 아티클 데이터를 프롬프트용 문자열로 포맷