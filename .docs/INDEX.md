# seosoyoung 코드 인덱스

> 이 문서는 자동 생성되었습니다. 직접 수정하지 마세요.
> 생성 명령: `python .docs/generate.py`

## 모듈 목록

- [`seosoyoung/auth.py`](modules/seosoyoung_auth.md): 권한 및 역할 관리
- [`claude/agent_runner.py`](modules/claude_agent_runner.md): Claude Code SDK 기반 실행기
- [`claude/executor.py`](modules/claude_executor.md): Claude Code 실행 로직
- [`claude/message_formatter.py`](modules/claude_message_formatter.md): 슬랙 메시지 포맷팅 유틸리티
- [`claude/security.py`](modules/claude_security.md): 보안 레이어
- [`claude/service_adapter.py`](modules/claude_service_adapter.md): Claude Soul Service Adapter
- [`claude/service_client.py`](modules/claude_service_client.md): Claude Soul Service HTTP + SSE 클라이언트
- [`claude/session.py`](modules/claude_session.md): Claude Code 세션 관리
- [`claude/session_context.py`](modules/claude_session_context.md): 세션 컨텍스트 주입
- [`seosoyoung/config.py`](modules/seosoyoung_config.md): 설정 관리
- [`handlers/actions.py`](modules/handlers_actions.md): 재시작 버튼 액션 핸들러
- [`handlers/channel_collector.py`](modules/handlers_channel_collector.md): 채널 메시지 수집기
- [`handlers/mention.py`](modules/handlers_mention.md): @seosoyoung 멘션 핸들러
- [`handlers/message.py`](modules/handlers_message.md): 스레드 메시지 핸들러
- [`handlers/translate.py`](modules/handlers_translate.md): 번역 핸들러
- [`seosoyoung/logging_config.py`](modules/seosoyoung_logging_config.md): 로깅 설정 모듈
- [`seosoyoung/main.py`](modules/seosoyoung_main.md): SeoSoyoung 슬랙 봇 메인
- [`mcp/__main__.py`](modules/mcp___main__.md): MCP 서버 실행 진입점
- [`mcp/config.py`](modules/mcp_config.md): MCP 서버 설정
- [`mcp/server.py`](modules/mcp_server.md): seosoyoung MCP 서버 정의
- [`api/attachments.py`](modules/api_attachments.md): Attachments API - 첨부 파일 관리 엔드포인트
- [`api/auth.py`](modules/api_auth.md): Authentication - Bearer 토큰 인증
- [`api/tasks.py`](modules/api_tasks.md): Tasks API - 태스크 기반 API 엔드포인트
- [`soul/config.py`](modules/soul_config.md): Seosoyoung Soul - Configuration
- [`soul/constants.py`](modules/soul_constants.md): Seosoyoung Soul - 공통 상수 정의
- [`soul/main.py`](modules/soul_main.md): Seosoyoung Soul - FastAPI Application
- [`models/schemas.py`](modules/models_schemas.md): Pydantic 모델 - Request/Response 스키마
- [`service/attachment_extractor.py`](modules/service_attachment_extractor.md): 첨부 파일 추출 모듈
- [`service/claude_runner.py`](modules/service_claude_runner.md): ClaudeCodeRunner - Claude Code CLI 실행
- [`service/file_manager.py`](modules/service_file_manager.md): FileManager - 첨부 파일 관리
- [`service/output_sanitizer.py`](modules/service_output_sanitizer.md): 출력 민감 정보 마스킹 모듈
- [`service/resource_manager.py`](modules/service_resource_manager.md): ResourceManager - 동시 실행 제한 관리
- [`service/session_validator.py`](modules/service_session_validator.md): 세션 검증 모듈
- [`service/task_executor.py`](modules/service_task_executor.md): Task Executor - 백그라운드 태스크 실행 관리
- [`service/task_listener.py`](modules/service_task_listener.md): Task Listener - SSE 리스너 관리
- [`service/task_manager.py`](modules/service_task_manager.md): TaskManager - 태스크 라이프사이클 관리
- [`service/task_models.py`](modules/service_task_models.md): Task Models - 태스크 관련 데이터 모델 및 예외
- [`service/task_storage.py`](modules/service_task_storage.md): Task Storage - 태스크 영속화 관리
- [`tools/attach.py`](modules/tools_attach.md): 파일 첨부 및 슬랙 컨텍스트 MCP 도구
- [`tools/image_gen.py`](modules/tools_image_gen.md): 이미지 생성 및 슬랙 업로드 MCP 도구
- [`tools/lore_search.py`](modules/tools_lore_search.md): A-RAG 로어 검색 MCP 도구 — keyword_search, semantic_search, chunk_read.
- [`tools/npc_chat.py`](modules/tools_npc_chat.md): NPC 대화 모듈: 캐릭터 로더, 프롬프트 빌더, 세션 관리, Claude API 연동.
- [`tools/slack_messaging.py`](modules/tools_slack_messaging.md): 슬랙 메시지 전송 MCP 도구
- [`tools/thread_files.py`](modules/tools_thread_files.md): 스레드 내 파일 다운로드 MCP 도구
- [`tools/user_profile.py`](modules/tools_user_profile.md): Slack 사용자 프로필 조회 및 아바타 다운로드 MCP 도구
- [`memory/channel_intervention.py`](modules/memory_channel_intervention.md): 채널 개입(intervention) 모듈
- [`memory/channel_observer.py`](modules/memory_channel_observer.md): 채널 관찰 엔진
- [`memory/channel_pipeline.py`](modules/memory_channel_pipeline.md): 채널 소화/판단 파이프라인
- [`memory/channel_prompts.py`](modules/memory_channel_prompts.md): 채널 관찰 프롬프트
- [`memory/channel_scheduler.py`](modules/memory_channel_scheduler.md): 채널 소화 주기적 스케줄러
- [`memory/channel_store.py`](modules/memory_channel_store.md): 채널 관찰 데이터 저장소
- [`memory/context_builder.py`](modules/memory_context_builder.md): 컨텍스트 빌더
- [`memory/observation_pipeline.py`](modules/memory_observation_pipeline.md): 관찰 파이프라인
- [`memory/observer.py`](modules/memory_observer.md): Observer 모듈
- [`memory/promoter.py`](modules/memory_promoter.md): Promoter / Compactor 모듈
- [`memory/prompt_loader.py`](modules/memory_prompt_loader.md): 프롬프트 파일 로더
- [`memory/prompts.py`](modules/memory_prompts.md): Observer/Reflector 프롬프트
- [`memory/reflector.py`](modules/memory_reflector.md): Reflector 모듈
- [`memory/store.py`](modules/memory_store.md): 관찰 로그 저장소
- [`memory/token_counter.py`](modules/memory_token_counter.md): 토큰 카운터
- [`profile/manager.py`](modules/profile_manager.md): Claude Code 인증 프로필 관리 (CLAUDE_CONFIG_DIR + Junction 방식)
- [`recall/aggregator.py`](modules/recall_aggregator.md): 결과 집계기
- [`recall/evaluator.py`](modules/recall_evaluator.md): 하이쿠 평가 클라이언트
- [`recall/loader.py`](modules/recall_loader.md): 도구 정의 로더
- [`recall/recall.py`](modules/recall_recall.md): Recall - 도구 선택 사전 분석 파이프라인
- [`rescue/__main__.py`](modules/rescue___main__.md): python -m seosoyoung.rescue.main 실행 지원
- [`rescue/config.py`](modules/rescue_config.md): rescue-bot 환경변수 설정
- [`rescue/main.py`](modules/rescue_main.md): rescue-bot 메인 모듈
- [`rescue/runner.py`](modules/rescue_runner.md): Claude Code SDK 실행기 (세션 재개 지원)
- [`seosoyoung/restart.py`](modules/seosoyoung_restart.md): 재시작 관리
- [`search/build.py`](modules/search_build.md): 통합 빌드 스크립트 — Whoosh + 임베딩 인덱스를 한 번에 빌드.
- [`search/embedding_cache.py`](modules/search_embedding_cache.md): OpenAI 임베딩 캐시.
- [`search/embedding_index.py`](modules/search_embedding_index.md): 임베딩 인덱스 빌더 + 코사인 유사도 검색.
- [`search/git_watcher.py`](modules/search_git_watcher.md): Git Poll Watcher — eb_narrative/eb_lore HEAD 감시 + 인덱스 자동 재빌드.
- [`search/indexer.py`](modules/search_indexer.md): Dialogue indexer — dlglist YAML → Whoosh index.
- [`search/lore_indexer.py`](modules/search_lore_indexer.md): eb_lore 인덱서 — YAML → Whoosh lore index.
- [`search/schema.py`](modules/search_schema.md): Whoosh schema definitions for search indices.
- [`search/searcher.py`](modules/search_searcher.md): Whoosh searcher for dialogue data.
- [`search/sentence_splitter.py`](modules/search_sentence_splitter.md): 한/영 텍스트 문장 분할기.
- [`slack/file_handler.py`](modules/slack_file_handler.md): 슬랙 파일 다운로드 및 처리 유틸리티
- [`slack/helpers.py`](modules/slack_helpers.md): Slack 메시지 유틸리티
- [`translator/__main__.py`](modules/translator___main__.md): 번역 기능 CLI 테스트
- [`translator/detector.py`](modules/translator_detector.md): 언어 감지 모듈
- [`translator/glossary.py`](modules/translator_glossary.md): 용어집 로더 모듈
- [`translator/translator.py`](modules/translator_translator.md): 번역 모듈
- [`trello/client.py`](modules/trello_client.md): Trello API 클라이언트
- [`trello/list_runner.py`](modules/trello_list_runner.md): ListRunner - 리스트 정주행 기능
- [`trello/watcher.py`](modules/trello_watcher.md): Trello 워처 - To Go 리스트 감시 및 처리
- [`web/cache.py`](modules/web_cache.md): 웹 콘텐츠 캐시 관리
- [`web/extractor.py`](modules/web_extractor.md): HTML에서 컨텐츠 및 메타데이터 추출
- [`web/fetcher.py`](modules/web_fetcher.md): Selenium 기반 HTML 페처

## 빠른 참조

### 주요 클래스

- `ClaudeResult` (seosoyoung/claude/agent_runner.py:94): Claude Code 실행 결과
- `ClaudeAgentRunner` (seosoyoung/claude/agent_runner.py:109): Claude Code SDK 기반 실행기
- `PendingPrompt` (seosoyoung/claude/executor.py:63): 인터벤션 대기 중인 프롬프트 정보
- `ClaudeExecutor` (seosoyoung/claude/executor.py:79): Claude Code 실행기
- `SecurityError` (seosoyoung/claude/security.py:10): 보안 관련 에러
- `ClaudeServiceAdapter` (seosoyoung/claude/service_adapter.py:26): 원격 soul 서버 어댑터
- `SSEEvent` (seosoyoung/claude/service_client.py:32): Server-Sent Event 데이터
- `ExecuteResult` (seosoyoung/claude/service_client.py:39): soul 서버 실행 결과
- `SoulServiceError` (seosoyoung/claude/service_client.py:49): Soul Service 클라이언트 오류
- `TaskConflictError` (seosoyoung/claude/service_client.py:54): 태스크 충돌 오류 (이미 실행 중인 태스크 존재)
- `TaskNotFoundError` (seosoyoung/claude/service_client.py:59): 태스크를 찾을 수 없음
- `TaskNotRunningError` (seosoyoung/claude/service_client.py:64): 태스크가 실행 중이 아님
- `RateLimitError` (seosoyoung/claude/service_client.py:69): 동시 실행 제한 초과
- `ConnectionLostError` (seosoyoung/claude/service_client.py:74): SSE 연결 끊김 (재시도 실패)
- `ExponentialBackoff` (seosoyoung/claude/service_client.py:81): 지수 백오프 유틸리티
- `SoulServiceClient` (seosoyoung/claude/service_client.py:111): seosoyoung-soul 서버 HTTP + SSE 클라이언트
- `Session` (seosoyoung/claude/session.py:21): Claude Code 세션 정보
- `SessionManager` (seosoyoung/claude/session.py:43): 세션 매니저
- `SessionRuntime` (seosoyoung/claude/session.py:223): 세션 실행 상태 관리자
- `ConfigurationError` (seosoyoung/config.py:17): 설정 오류 예외
- `Config` (seosoyoung/config.py:58): 애플리케이션 설정
- `ChannelMessageCollector` (seosoyoung/handlers/channel_collector.py:13): 관찰 대상 채널의 메시지를 수집하여 버퍼에 저장
- `Settings` (seosoyoung/mcp/soul/config.py:35): 애플리케이션 설정
- `SSEEventType` (seosoyoung/mcp/soul/models/schemas.py:13): SSE 이벤트 타입
- `InterveneRequest` (seosoyoung/mcp/soul/models/schemas.py:24): 개입 메시지 요청 (Task API 호환)
- `InterveneResponse` (seosoyoung/mcp/soul/models/schemas.py:33): 개입 메시지 응답
- `AttachmentUploadResponse` (seosoyoung/mcp/soul/models/schemas.py:39): 첨부 파일 업로드 응답
- `AttachmentCleanupResponse` (seosoyoung/mcp/soul/models/schemas.py:47): 첨부 파일 정리 응답
- `HealthResponse` (seosoyoung/mcp/soul/models/schemas.py:53): 헬스 체크 응답
- `ErrorDetail` (seosoyoung/mcp/soul/models/schemas.py:63): 에러 상세 정보
- `ErrorResponse` (seosoyoung/mcp/soul/models/schemas.py:70): 에러 응답
- `ProgressEvent` (seosoyoung/mcp/soul/models/schemas.py:77): 진행 상황 이벤트
- `MemoryEvent` (seosoyoung/mcp/soul/models/schemas.py:83): 메모리 사용량 이벤트
- `InterventionSentEvent` (seosoyoung/mcp/soul/models/schemas.py:91): 개입 메시지 전송 확인 이벤트
- `CompleteEvent` (seosoyoung/mcp/soul/models/schemas.py:98): 실행 완료 이벤트
- `ErrorEvent` (seosoyoung/mcp/soul/models/schemas.py:106): 오류 이벤트
- `ContextUsageEvent` (seosoyoung/mcp/soul/models/schemas.py:113): 컨텍스트 사용량 이벤트
- `CompactEvent` (seosoyoung/mcp/soul/models/schemas.py:121): 컴팩트 실행 이벤트
- `TaskStatus` (seosoyoung/mcp/soul/models/schemas.py:130): 태스크 상태
- `ExecuteRequest` (seosoyoung/mcp/soul/models/schemas.py:137): 실행 요청
- `TaskResponse` (seosoyoung/mcp/soul/models/schemas.py:146): 태스크 정보 응답
- `TaskListResponse` (seosoyoung/mcp/soul/models/schemas.py:159): 태스크 목록 응답
- `TaskInterveneRequest` (seosoyoung/mcp/soul/models/schemas.py:164): 개입 메시지 요청
- `AttachmentExtractor` (seosoyoung/mcp/soul/service/attachment_extractor.py:15): 첨부 파일 추출기
- `InterventionMessage` (seosoyoung/mcp/soul/service/claude_runner.py:66): 개입 메시지 데이터
- `ClaudeCodeRunner` (seosoyoung/mcp/soul/service/claude_runner.py:73): Claude Code CLI 실행기
- `AttachmentError` (seosoyoung/mcp/soul/service/file_manager.py:23): 첨부 파일 처리 오류
- `FileManager` (seosoyoung/mcp/soul/service/file_manager.py:28): 첨부 파일 관리자
- `ResourceManager` (seosoyoung/mcp/soul/service/resource_manager.py:18): 동시 실행 제한 관리자
- `TaskExecutor` (seosoyoung/mcp/soul/service/task_executor.py:19): 백그라운드 태스크 실행 관리자
- `TaskListenerManager` (seosoyoung/mcp/soul/service/task_listener.py:16): SSE 리스너 관리자
- `TaskManager` (seosoyoung/mcp/soul/service/task_manager.py:52): 태스크 라이프사이클 관리자
- `TaskStatus` (seosoyoung/mcp/soul/service/task_models.py:14): 태스크 상태
- `TaskConflictError` (seosoyoung/mcp/soul/service/task_models.py:21): 태스크 충돌 오류 (같은 키로 running 태스크 존재)
- `TaskNotFoundError` (seosoyoung/mcp/soul/service/task_models.py:26): 태스크 없음 오류
- `TaskNotRunningError` (seosoyoung/mcp/soul/service/task_models.py:31): 태스크가 running 상태가 아님
- `Task` (seosoyoung/mcp/soul/service/task_models.py:52): 태스크 데이터
- `TaskStorage` (seosoyoung/mcp/soul/service/task_storage.py:23): 태스크 영속화 관리자
- `GeneratedImage` (seosoyoung/mcp/tools/image_gen.py:32): 생성된 이미지 결과
- `CharacterLoader` (seosoyoung/mcp/tools/npc_chat.py:30): eb_lore 캐릭터 YAML 파일을 로드하고 필드를 추출한다.
- `PromptBuilder` (seosoyoung/mcp/tools/npc_chat.py:126): 캐릭터 데이터를 프롬프트 템플릿에 채워 시스템 프롬프트를 생성한다.
- `NpcSession` (seosoyoung/mcp/tools/npc_chat.py:200): NPC 대화 세션. 세션별 대화 이력과 설정을 보관한다.
- `InterventionAction` (seosoyoung/memory/channel_intervention.py:31): 개입 액션
- `InterventionHistory` (seosoyoung/memory/channel_intervention.py:154): 개입 이력 관리
- `ChannelObserverResult` (seosoyoung/memory/channel_observer.py:30): 채널 관찰 결과 (하위호환 유지)
- `DigestResult` (seosoyoung/memory/channel_observer.py:41): 소화 전용 결과
- `JudgeItem` (seosoyoung/memory/channel_observer.py:49): 개별 메시지에 대한 리액션 판단 결과
- `JudgeResult` (seosoyoung/memory/channel_observer.py:71): 복수 메시지에 대한 리액션 판단 결과
- `DigestCompressorResult` (seosoyoung/memory/channel_observer.py:97): digest 압축 결과
- `ChannelObserver` (seosoyoung/memory/channel_observer.py:277): 채널 대화를 관찰하여 digest를 갱신하고 반응을 판단
- `DigestCompressor` (seosoyoung/memory/channel_observer.py:427): digest가 임계치를 초과할 때 압축
- `DisplayNameResolver` (seosoyoung/memory/channel_prompts.py:18): Slack user ID → 디스플레이네임 캐시 기반 변환기.
- `ChannelDigestScheduler` (seosoyoung/memory/channel_scheduler.py:18): 주기적으로 채널 버퍼를 체크하여 소화를 트리거하는 스케줄러
- `ChannelStore` (seosoyoung/memory/channel_store.py:24): 파일 기반 채널 관찰 데이터 저장소
- `InjectionResult` (seosoyoung/memory/context_builder.py:31): 주입 결과 — 디버그 로그용 정보를 포함
- `ContextBuilder` (seosoyoung/memory/context_builder.py:130): 장기 기억 + 세션 관찰 로그 + 채널 관찰을 시스템 프롬프트로 변환
- `ObserverResult` (seosoyoung/memory/observer.py:22): Observer 출력 결과
- `Observer` (seosoyoung/memory/observer.py:63): 대화를 관찰하여 구조화된 관찰 로그를 생성
- `PromoterResult` (seosoyoung/memory/promoter.py:20): Promoter 출력 결과
- `CompactorResult` (seosoyoung/memory/promoter.py:35): Compactor 출력 결과
- `Promoter` (seosoyoung/memory/promoter.py:103): 장기 기억 후보를 검토하여 승격
- `Compactor` (seosoyoung/memory/promoter.py:157): 장기 기억을 압축
- `ReflectorResult` (seosoyoung/memory/reflector.py:23): Reflector 출력 결과
- `Reflector` (seosoyoung/memory/reflector.py:38): 관찰 로그를 압축하고 재구조화
- `MemoryRecord` (seosoyoung/memory/store.py:36): 세션별 관찰 로그 레코드
- `MemoryStore` (seosoyoung/memory/store.py:96): 파일 기반 관찰 로그 저장소
- `TokenCounter` (seosoyoung/memory/token_counter.py:9): o200k_base 인코딩 기반 토큰 카운터
- `ProfileInfo` (seosoyoung/profile/manager.py:23): 프로필 정보
- `ProfileManager` (seosoyoung/profile/manager.py:33): Claude Code 인증 프로필 관리자 (CLAUDE_CONFIG_DIR + Junction)
- `AggregationResult` (seosoyoung/recall/aggregator.py:121): 집계 결과
- `ResultAggregator` (seosoyoung/recall/aggregator.py:211): 결과 집계기
- `EvaluationResult` (seosoyoung/recall/evaluator.py:182): 도구 평가 결과
- `ToolEvaluator` (seosoyoung/recall/evaluator.py:208): 도구 적합도 평가기
- `ToolDefinition` (seosoyoung/recall/loader.py:51): 도구 정의 기본 클래스
- `AgentDefinition` (seosoyoung/recall/loader.py:73): 에이전트 정의
- `SkillDefinition` (seosoyoung/recall/loader.py:95): 스킬 정의
- `ToolLoader` (seosoyoung/recall/loader.py:125): 도구 정의 로더
- `RecallResult` (seosoyoung/recall/recall.py:30): Recall 결과
- `Recall` (seosoyoung/recall/recall.py:106): Recall - 도구 선택 사전 분석 파이프라인
- `RescueConfig` (seosoyoung/rescue/config.py:14): rescue-bot 설정
- `RescueResult` (seosoyoung/rescue/runner.py:45): 실행 결과
- `RestartType` (seosoyoung/restart.py:15): 재시작 유형
- `RestartRequest` (seosoyoung/restart.py:22): 재시작 요청 정보
- `RestartManager` (seosoyoung/restart.py:30): 재시작 관리자
- `EmbeddingCache` (seosoyoung/search/embedding_cache.py:14): OpenAI text-embedding-3-small 임베딩 + 로컬 JSON 캐시.
- `EmbeddingIndexBuilder` (seosoyoung/search/embedding_index.py:45): dlglist 대사와 eb_lore 텍스트를 문장 단위 임베딩 인덱스로 빌드.
- `BuildLock` (seosoyoung/search/git_watcher.py:26): 파일 기반 빌드 lock — pre-commit hook과 동시 빌드 방지.
- `IndexStatus` (seosoyoung/search/git_watcher.py:65): 인덱스 상태 정보 — lore_index_status 도구에서 조회.
- `GitWatcher` (seosoyoung/search/git_watcher.py:128): Git HEAD 폴링 워처 — 백그라운드 스레드로 실행.
- `DialogueMetadata` (seosoyoung/search/indexer.py:19): dlgId에 대한 메타데이터.
- `DialogueReferenceMap` (seosoyoung/search/indexer.py:27): 대화 구조 파일을 스캔하여 dlgId → 메타데이터 역참조 맵 생성.
- `DialogueIndexer` (seosoyoung/search/indexer.py:164): dlglist YAML 파일을 Whoosh 인덱스로 변환.
- `LoreIndexer` (seosoyoung/search/lore_indexer.py:62): eb_lore YAML → Whoosh lore index.
- `DialogueSearcher` (seosoyoung/search/searcher.py:14): 대사 검색 API.
- `SlackFile` (seosoyoung/slack/file_handler.py:35): 슬랙 파일 정보
- `DownloadedFile` (seosoyoung/slack/file_handler.py:45): 다운로드된 파일 정보
- `Language` (seosoyoung/translator/detector.py:9): 
- `GlossaryMatchResult` (seosoyoung/translator/glossary.py:43): 용어 매칭 결과
- `TrelloCard` (seosoyoung/trello/client.py:16): 트렐로 카드 정보
- `TrelloClient` (seosoyoung/trello/client.py:28): Trello API 클라이언트
- `ListNotFoundError` (seosoyoung/trello/list_runner.py:20): 리스트를 찾을 수 없을 때 발생하는 예외
- `EmptyListError` (seosoyoung/trello/list_runner.py:25): 리스트에 카드가 없을 때 발생하는 예외
- `ValidationStatus` (seosoyoung/trello/list_runner.py:30): 검증 결과 상태
- `SessionStatus` (seosoyoung/trello/list_runner.py:37): 리스트 정주행 세션 상태
- `CardExecutionResult` (seosoyoung/trello/list_runner.py:48): 카드 실행 결과
- `ValidationResult` (seosoyoung/trello/list_runner.py:58): 검증 결과
- `CardRunResult` (seosoyoung/trello/list_runner.py:67): 카드 실행 및 검증 전체 결과
- `ListRunSession` (seosoyoung/trello/list_runner.py:78): 리스트 정주행 세션 정보
- `ListRunner` (seosoyoung/trello/list_runner.py:123): 리스트 정주행 관리자
- `TrackedCard` (seosoyoung/trello/watcher.py:19): 추적 중인 카드 정보 (To Go 리스트 감시용)
- `ThreadCardInfo` (seosoyoung/trello/watcher.py:35): 스레드 ↔ 카드 매핑 정보 (리액션 처리용)
- `TrelloWatcher` (seosoyoung/trello/watcher.py:51): Trello 리스트 감시자
- `WebCache` (seosoyoung/web/cache.py:10): URL 기반 웹 콘텐츠 캐시 관리자
- `ContentExtractor` (seosoyoung/web/extractor.py:30): HTML에서 본문과 메타데이터를 추출하는 클래스
- `HtmlFetcher` (seosoyoung/web/fetcher.py:14): Selenium을 사용한 동적 웹 페이지 HTML 페처

### 주요 함수

- `check_permission()` (seosoyoung/auth.py:13): 사용자 권한 확인 (관리자 명령어용)
- `get_user_role()` (seosoyoung/auth.py:26): 사용자 역할 정보 반환
- `get_claude_runner()` (seosoyoung/claude/__init__.py:9): Claude 실행기 인스턴스를 반환하는 팩토리 함수
- `async main()` (seosoyoung/claude/agent_runner.py:887): 
- `get_runner_for_role()` (seosoyoung/claude/executor.py:47): 역할에 맞는 ClaudeAgentRunner 반환
- `build_context_usage_bar()` (seosoyoung/claude/message_formatter.py:15): usage dict에서 컨텍스트 사용량 바를 생성
- `escape_backticks()` (seosoyoung/claude/message_formatter.py:50): 텍스트 내 모든 백틱을 이스케이프
- `parse_summary_details()` (seosoyoung/claude/message_formatter.py:69): 응답에서 요약과 상세 내용을 파싱
- `strip_summary_details_markers()` (seosoyoung/claude/message_formatter.py:103): 응답에서 SUMMARY/DETAILS 마커만 제거하고 내용은 유지
- `build_trello_header()` (seosoyoung/claude/message_formatter.py:127): 트렐로 카드용 슬랙 메시지 헤더 생성
- `build_initial_context()` (seosoyoung/claude/session_context.py:15): 세션 최초 생성 시 채널 컨텍스트를 구성합니다.
- `build_followup_context()` (seosoyoung/claude/session_context.py:67): 후속 요청 시 last_seen_ts 이후 미전송 메시지를 구성합니다.
- `format_hybrid_context()` (seosoyoung/claude/session_context.py:134): hybrid 세션용 채널 컨텍스트를 프롬프트 텍스트로 포맷합니다.
- `register_all_handlers()` (seosoyoung/handlers/__init__.py:9): 모든 핸들러를 앱에 등록
- `send_restart_confirmation()` (seosoyoung/handlers/actions.py:11): 재시작 확인 메시지를 인터랙티브 버튼과 함께 전송
- `register_action_handlers()` (seosoyoung/handlers/actions.py:79): 액션 핸들러 등록
- `extract_command()` (seosoyoung/handlers/mention.py:82): 멘션에서 명령어 추출
- `build_prompt_with_recall()` (seosoyoung/handlers/mention.py:108): Recall 결과를 포함한 프롬프트 구성.
- `get_channel_history()` (seosoyoung/handlers/mention.py:174): 채널의 최근 메시지를 가져와서 컨텍스트 문자열로 반환
- `register_mention_handlers()` (seosoyoung/handlers/mention.py:179): 멘션 핸들러 등록
- `build_slack_context()` (seosoyoung/handlers/message.py:20): 슬랙 컨텍스트 블록 문자열을 생성합니다.
- `process_thread_message()` (seosoyoung/handlers/message.py:46): 세션이 있는 스레드에서 메시지를 처리하는 공통 로직.
- `register_message_handlers()` (seosoyoung/handlers/message.py:142): 메시지 핸들러 등록
- `process_translate_message()` (seosoyoung/handlers/translate.py:194): 메시지를 번역 처리합니다.
- `register_translate_handler()` (seosoyoung/handlers/translate.py:319): 번역 핸들러를 앱에 등록합니다.
- `setup_logging()` (seosoyoung/logging_config.py:44): 로깅 설정 및 로거 반환
- `notify_startup()` (seosoyoung/main.py:151): 봇 시작 알림
- `notify_shutdown()` (seosoyoung/main.py:162): 봇 종료 알림
- `start_trello_watcher()` (seosoyoung/main.py:173): Trello 워처 시작
- `start_list_runner()` (seosoyoung/main.py:193): 리스트 러너 초기화
- `init_bot_user_id()` (seosoyoung/main.py:203): 봇 사용자 ID 초기화
- `start_git_watcher()` (seosoyoung/mcp/server.py:46): Git watcher 백그라운드 스레드 시작.
- `stop_git_watcher()` (seosoyoung/mcp/server.py:72): Git watcher 정지.
- `slack_attach_file()` (seosoyoung/mcp/server.py:81): 슬랙에 파일을 첨부합니다.
- `slack_get_context()` (seosoyoung/mcp/server.py:97): 현재 슬랙 대화의 채널/스레드 정보를 반환합니다.
- `slack_post_message()` (seosoyoung/mcp/server.py:107): 봇 권한으로 슬랙 채널에 메시지를 보냅니다.
- `async slack_generate_image()` (seosoyoung/mcp/server.py:128): 텍스트 프롬프트로 이미지를 생성하고 슬랙 스레드에 업로드합니다.
- `async slack_download_thread_files()` (seosoyoung/mcp/server.py:151): 스레드 내 모든 메시지의 첨부 파일을 다운로드합니다.
- `slack_get_user_profile()` (seosoyoung/mcp/server.py:165): Slack 사용자의 프로필 정보를 조회합니다.
- `async slack_download_user_avatar()` (seosoyoung/mcp/server.py:177): Slack 사용자의 프로필 이미지를 다운로드합니다.
- `npc_list_characters()` (seosoyoung/mcp/server.py:192): 대화 가능한 NPC 캐릭터 목록을 반환합니다.
- `npc_open_session()` (seosoyoung/mcp/server.py:202): NPC 대화 세션을 열고 NPC의 첫 반응을 반환합니다.
- `npc_talk()` (seosoyoung/mcp/server.py:221): NPC에게 말을 걸고 응답을 받습니다.
- `npc_set_situation()` (seosoyoung/mcp/server.py:234): 대화 중 상황을 변경하고 NPC의 반응을 받습니다.
- `npc_inject()` (seosoyoung/mcp/server.py:247): 다른 NPC의 대사를 세션 대화 이력에 주입합니다.
- `npc_close_session()` (seosoyoung/mcp/server.py:262): 세션을 종료하고 전체 대화 이력을 반환합니다.
- `npc_get_history()` (seosoyoung/mcp/server.py:274): 세션의 대화 이력을 조회합니다 (세션 유지).
- `lore_keyword_search()` (seosoyoung/mcp/server.py:286): 키워드 기반 로어/대사 검색.
- `lore_semantic_search()` (seosoyoung/mcp/server.py:307): 의미 기반 로어/대사 검색.
- `lore_chunk_read()` (seosoyoung/mcp/server.py:329): chunk_id로 전체 텍스트를 읽습니다.
- `lore_index_status()` (seosoyoung/mcp/server.py:360): 로어/대사 검색 인덱스의 상태를 반환합니다.
- `async upload_attachment()` (seosoyoung/mcp/soul/api/attachments.py:27): 첨부 파일 업로드
- `async cleanup_attachments()` (seosoyoung/mcp/soul/api/attachments.py:83): 스레드의 첨부 파일 정리
- `async verify_token()` (seosoyoung/mcp/soul/api/auth.py:20): Bearer 토큰 검증
- `task_to_response()` (seosoyoung/mcp/soul/api/tasks.py:38): Task를 TaskResponse로 변환
- `async execute_task()` (seosoyoung/mcp/soul/api/tasks.py:61): Claude Code 실행 (SSE 스트리밍)
- `async get_tasks()` (seosoyoung/mcp/soul/api/tasks.py:149): 클라이언트의 태스크 목록 조회
- `async get_task()` (seosoyoung/mcp/soul/api/tasks.py:171): 특정 태스크 조회
- `async reconnect_stream()` (seosoyoung/mcp/soul/api/tasks.py:201): 태스크 SSE 스트림에 재연결
- `async ack_task()` (seosoyoung/mcp/soul/api/tasks.py:288): 결과 수신 확인
- `async intervene_task()` (seosoyoung/mcp/soul/api/tasks.py:326): 실행 중인 태스크에 개입 메시지 전송
- `get_settings()` (seosoyoung/mcp/soul/config.py:106): 설정 싱글톤 반환
- `setup_logging()` (seosoyoung/mcp/soul/config.py:111): 로깅 설정
- `async periodic_cleanup()` (seosoyoung/mcp/soul/main.py:37): 주기적 태스크 정리 (24시간 이상 된 완료 태스크)
- `async lifespan()` (seosoyoung/mcp/soul/main.py:53): 애플리케이션 라이프사이클 관리
- `async health_check()` (seosoyoung/mcp/soul/main.py:137): 헬스 체크 엔드포인트
- `async get_status()` (seosoyoung/mcp/soul/main.py:148): 서비스 상태 조회
- `async global_exception_handler()` (seosoyoung/mcp/soul/main.py:180): 전역 예외 핸들러
- `sanitize_output()` (seosoyoung/mcp/soul/service/output_sanitizer.py:32): 출력에서 민감 정보를 마스킹합니다.
- `find_session_file()` (seosoyoung/mcp/soul/service/session_validator.py:16): 세션 파일을 찾습니다.
- `validate_session()` (seosoyoung/mcp/soul/service/session_validator.py:44): 세션 ID가 유효한지 검증합니다.
- `get_task_manager()` (seosoyoung/mcp/soul/service/task_manager.py:486): TaskManager 싱글톤 반환
- `init_task_manager()` (seosoyoung/mcp/soul/service/task_manager.py:494): TaskManager 초기화
- `set_task_manager()` (seosoyoung/mcp/soul/service/task_manager.py:501): TaskManager 인스턴스 설정 (테스트용)
- `utc_now()` (seosoyoung/mcp/soul/service/task_models.py:36): 현재 UTC 시간 반환
- `datetime_to_str()` (seosoyoung/mcp/soul/service/task_models.py:41): datetime을 ISO 문자열로 변환
- `str_to_datetime()` (seosoyoung/mcp/soul/service/task_models.py:46): ISO 문자열을 datetime으로 변환
- `get_slack_context()` (seosoyoung/mcp/tools/attach.py:24): 현재 대화의 채널/스레드 정보를 환경변수에서 읽어 반환
- `attach_file()` (seosoyoung/mcp/tools/attach.py:36): 슬랙에 파일을 첨부
- `async generate_image()` (seosoyoung/mcp/tools/image_gen.py:57): Gemini API로 이미지를 생성하고 임시 파일로 저장
- `async generate_and_upload_image()` (seosoyoung/mcp/tools/image_gen.py:132): 이미지를 생성하고 슬랙 스레드에 업로드
- `reset_context_tracker()` (seosoyoung/mcp/tools/lore_search.py:50): 테스트용: 트래커 초기화.
- `reset_indices()` (seosoyoung/mcp/tools/lore_search.py:101): 테스트용: 인덱스 캐시 초기화.
- `lore_keyword_search()` (seosoyoung/mcp/tools/lore_search.py:106): 키워드 기반 로어/대사 검색.
- `lore_semantic_search()` (seosoyoung/mcp/tools/lore_search.py:210): 의미 기반 로어/대사 검색.
- `lore_chunk_read()` (seosoyoung/mcp/tools/lore_search.py:300): chunk_id로 전체 텍스트를 읽는다.
- `npc_list_characters()` (seosoyoung/mcp/tools/npc_chat.py:185): 대화 가능한 NPC 캐릭터 목록을 반환한다.
- `npc_open_session()` (seosoyoung/mcp/tools/npc_chat.py:311): NPC 대화 세션을 열고 NPC의 첫 반응을 반환한다.
- `npc_talk()` (seosoyoung/mcp/tools/npc_chat.py:362): NPC에게 말하기. 사용자 메시지를 보내고 NPC 응답을 받는다.
- `npc_set_situation()` (seosoyoung/mcp/tools/npc_chat.py:399): 대화 중 상황을 변경한다. NPC가 새 상황에 반응한다.
- `npc_inject()` (seosoyoung/mcp/tools/npc_chat.py:441): 다른 NPC의 대사를 세션 대화 이력에 주입한다.
- `npc_close_session()` (seosoyoung/mcp/tools/npc_chat.py:458): 세션을 종료하고 대화 이력을 반환한다.
- `npc_get_history()` (seosoyoung/mcp/tools/npc_chat.py:477): 세션의 대화 이력을 조회한다 (세션 유지).
- `post_message()` (seosoyoung/mcp/tools/slack_messaging.py:51): 슬랙 채널에 메시지를 전송하고 선택적으로 파일을 첨부
- `async download_thread_files()` (seosoyoung/mcp/tools/thread_files.py:19): 스레드 내 모든 메시지의 첨부 파일을 다운로드
- `get_user_profile()` (seosoyoung/mcp/tools/user_profile.py:25): Slack 사용자 프로필 정보를 조회
- `async download_user_avatar()` (seosoyoung/mcp/tools/user_profile.py:67): Slack 사용자 프로필 이미지를 다운로드
- `parse_intervention_markup()` (seosoyoung/memory/channel_intervention.py:39): ChannelObserverResult를 InterventionAction 리스트로 변환합니다.
- `async execute_interventions()` (seosoyoung/memory/channel_intervention.py:80): InterventionAction 리스트를 슬랙 API로 발송합니다.
- `intervention_probability()` (seosoyoung/memory/channel_intervention.py:132): 시간 감쇠와 빈도 감쇠를 기반으로 개입 확률을 계산합니다.
- `async send_debug_log()` (seosoyoung/memory/channel_intervention.py:277): 디버그 채널에 관찰 결과 로그를 전송합니다 (Block Kit 형식).
- `send_collect_debug_log()` (seosoyoung/memory/channel_intervention.py:331): 메시지 수집 시 디버그 채널에 로그를 전송합니다 (Block Kit 형식).
- `send_digest_skip_debug_log()` (seosoyoung/memory/channel_intervention.py:376): 소화 스킵(임계치 미달) 시 디버그 채널에 로그를 전송합니다 (Block Kit 형식).
- `send_intervention_probability_debug_log()` (seosoyoung/memory/channel_intervention.py:407): 확률 기반 개입 판단 결과를 디버그 채널에 기록합니다 (Block Kit 형식).
- `send_multi_judge_debug_log()` (seosoyoung/memory/channel_intervention.py:452): 복수 판단 결과를 메시지별 독립 블록으로 디버그 채널에 전송합니다.
- `parse_channel_observer_output()` (seosoyoung/memory/channel_observer.py:104): Observer 응답에서 XML 태그를 파싱합니다.
- `parse_judge_output()` (seosoyoung/memory/channel_observer.py:130): Judge 응답에서 XML 태그를 파싱합니다.
- `async run_channel_pipeline()` (seosoyoung/memory/channel_pipeline.py:230): 소화/판단 분리 파이프라인을 실행합니다.
- `build_channel_observer_system_prompt()` (seosoyoung/memory/channel_prompts.py:65): 채널 관찰 시스템 프롬프트를 반환합니다.
- `build_channel_observer_user_prompt()` (seosoyoung/memory/channel_prompts.py:70): 채널 관찰 사용자 프롬프트를 구성합니다.
- `build_digest_compressor_system_prompt()` (seosoyoung/memory/channel_prompts.py:104): digest 압축 시스템 프롬프트를 반환합니다.
- `build_digest_compressor_retry_prompt()` (seosoyoung/memory/channel_prompts.py:109): digest 압축 재시도 프롬프트를 반환합니다.
- `get_channel_intervene_system_prompt()` (seosoyoung/memory/channel_prompts.py:118): 채널 개입 응답 생성 시스템 프롬프트를 반환합니다.
- `build_channel_intervene_user_prompt()` (seosoyoung/memory/channel_prompts.py:123): 채널 개입 응답 생성 사용자 프롬프트를 구성합니다.
- `build_digest_only_system_prompt()` (seosoyoung/memory/channel_prompts.py:162): 소화 전용 시스템 프롬프트를 반환합니다.
- `build_digest_only_user_prompt()` (seosoyoung/memory/channel_prompts.py:167): 소화 전용 사용자 프롬프트를 구성합니다.
- `build_judge_system_prompt()` (seosoyoung/memory/channel_prompts.py:198): 리액션 판단 전용 시스템 프롬프트를 반환합니다.
- `build_judge_user_prompt()` (seosoyoung/memory/channel_prompts.py:203): 리액션 판단 전용 사용자 프롬프트를 구성합니다.
- `add_relative_time()` (seosoyoung/memory/context_builder.py:45): 관찰 로그의 날짜 헤더에 상대 시간 주석을 추가합니다.
- `optimize_for_context()` (seosoyoung/memory/context_builder.py:88): 관찰 로그를 컨텍스트 주입에 최적화합니다.
- `parse_candidate_entries()` (seosoyoung/memory/observation_pipeline.py:102): <candidates> 태그 내용을 파싱하여 dict 리스트로 변환.
- `async observe_conversation()` (seosoyoung/memory/observation_pipeline.py:138): 매턴 Observer를 호출하여 세션 관찰 로그를 갱신하고 후보를 수집합니다.
- `parse_observer_output()` (seosoyoung/memory/observer.py:31): Observer 응답에서 XML 태그를 파싱합니다.
- `parse_promoter_output()` (seosoyoung/memory/promoter.py:83): Promoter 응답에서 <promoted>와 <rejected> 태그를 파싱합니다.
- `parse_compactor_output()` (seosoyoung/memory/promoter.py:97): Compactor 응답에서 <compacted> 태그를 파싱합니다.
- `load_prompt()` (seosoyoung/memory/prompt_loader.py:71): 프롬프트 파일을 로드합니다.
- `load_prompt_cached()` (seosoyoung/memory/prompt_loader.py:90): 프롬프트 파일을 캐시하여 로드합니다.
- `build_observer_system_prompt()` (seosoyoung/memory/prompts.py:18): Observer 시스템 프롬프트를 반환합니다.
- `build_observer_user_prompt()` (seosoyoung/memory/prompts.py:23): Observer 사용자 프롬프트를 구성합니다.
- `build_reflector_system_prompt()` (seosoyoung/memory/prompts.py:66): Reflector 시스템 프롬프트를 반환합니다.
- `build_reflector_retry_prompt()` (seosoyoung/memory/prompts.py:71): Reflector 재시도 프롬프트를 반환합니다.
- `build_promoter_prompt()` (seosoyoung/memory/prompts.py:78): Promoter 프롬프트를 구성합니다.
- `build_compactor_prompt()` (seosoyoung/memory/prompts.py:89): Compactor 프롬프트를 구성합니다.
- `rank_results()` (seosoyoung/recall/aggregator.py:27): 평가 결과를 점수 기준으로 정렬.
- `select_best_tool()` (seosoyoung/recall/aggregator.py:42): 최적 도구 선택.
- `build_summary_prompt()` (seosoyoung/recall/aggregator.py:67): 요약 생성 프롬프트.
- `build_evaluation_prompt()` (seosoyoung/recall/evaluator.py:28): 도구 평가를 위한 프롬프트 생성.
- `parse_evaluation_response()` (seosoyoung/recall/evaluator.py:90): 평가 응답 파싱.
- `parse_frontmatter()` (seosoyoung/recall/loader.py:19): YAML frontmatter와 본문을 분리하여 파싱.
- `handle_mention()` (seosoyoung/rescue/main.py:147): 멘션 이벤트 핸들러
- `handle_message()` (seosoyoung/rescue/main.py:174): 스레드 메시지 핸들러
- `main()` (seosoyoung/rescue/main.py:211): rescue-bot 진입점
- `run_sync()` (seosoyoung/rescue/runner.py:81): 동기 컨텍스트에서 코루틴을 실행하는 브릿지
- `async run_claude()` (seosoyoung/rescue/runner.py:91): Claude Code SDK를 호출하고 결과를 반환합니다.
- `build_whoosh()` (seosoyoung/search/build.py:19): Whoosh 인덱스 빌드 (대사 + 로어).
- `build_embeddings()` (seosoyoung/search/build.py:55): 임베딩 인덱스 빌드 (대사 + 로어).
- `build_all()` (seosoyoung/search/build.py:84): Whoosh + 임베딩 인덱스 통합 빌드.
- `main()` (seosoyoung/search/build.py:131): CLI 진입점.
- `load_embedding_index()` (seosoyoung/search/embedding_index.py:335): 저장된 임베딩 인덱스 로드.
- `cosine_similarity_search()` (seosoyoung/search/embedding_index.py:363): 코사인 유사도 기반 검색.
- `get_default_index_path()` (seosoyoung/search/searcher.py:197): 기본 인덱스 경로 반환.
- `format_results()` (seosoyoung/search/searcher.py:202): 결과 포맷팅.
- `main()` (seosoyoung/search/searcher.py:222): CLI 진입점.
- `split_sentences()` (seosoyoung/search/sentence_splitter.py:16): 텍스트를 문장 단위로 분할.
- `get_file_type()` (seosoyoung/slack/file_handler.py:54): 파일 확장자로 타입 분류
- `ensure_tmp_dir()` (seosoyoung/slack/file_handler.py:67): 스레드별 임시 폴더 생성
- `cleanup_thread_files()` (seosoyoung/slack/file_handler.py:76): 스레드의 임시 파일 정리
- `cleanup_all_files()` (seosoyoung/slack/file_handler.py:88): 모든 임시 파일 정리
- `async download_file()` (seosoyoung/slack/file_handler.py:98): 슬랙 파일 다운로드
- `async download_files_from_event()` (seosoyoung/slack/file_handler.py:183): 이벤트에서 파일들을 다운로드 (async 버전)
- `download_files_sync()` (seosoyoung/slack/file_handler.py:209): 이벤트에서 파일들을 다운로드 (동기 버전)
- `build_file_context()` (seosoyoung/slack/file_handler.py:240): 파일 정보를 프롬프트 컨텍스트로 구성
- `upload_file_to_slack()` (seosoyoung/slack/helpers.py:12): 파일을 슬랙에 첨부
- `send_long_message()` (seosoyoung/slack/helpers.py:47): 긴 메시지를 분할해서 전송 (thread_ts가 None이면 채널에 응답)
- `main()` (seosoyoung/translator/__main__.py:18): 
- `is_korean_char()` (seosoyoung/translator/detector.py:14): 한글 문자인지 확인 (한글 자모, 음절 모두 포함)
- `detect_language()` (seosoyoung/translator/detector.py:27): 텍스트의 언어를 감지
- `get_glossary_entries()` (seosoyoung/translator/glossary.py:137): 용어집 항목들을 (한국어, 영어) 쌍으로 반환 (캐싱)
- `find_relevant_terms()` (seosoyoung/translator/glossary.py:271): 텍스트에서 관련 용어 추출 (하위 호환성 유지)
- `find_relevant_terms_v2()` (seosoyoung/translator/glossary.py:290): 텍스트에서 관련 용어 추출 (개선된 버전, 디버그 정보 포함)
- `get_term_mappings()` (seosoyoung/translator/glossary.py:406): 용어 매핑 딕셔너리 생성 (하위 호환성 유지)
- `clear_cache()` (seosoyoung/translator/glossary.py:436): 캐시 초기화 (테스트 또는 용어집 갱신 시 사용)
- `translate()` (seosoyoung/translator/translator.py:169): 텍스트를 번역
- `async get_article()` (seosoyoung/web/__init__.py:22): URL에서 아티클 추출
- `format_article_for_prompt()` (seosoyoung/web/__init__.py:97): 아티클 데이터를 프롬프트용 문자열로 포맷